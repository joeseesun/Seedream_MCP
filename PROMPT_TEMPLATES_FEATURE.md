# 🎨 提示词模板系统

## 📋 功能概述

新增了**提示词模板系统**,允许用户通过简单的关键词快速应用专业的设计风格提示词。

### ✨ 核心功能

1. **自动模板检测** - 识别用户输入中的模板关键词
2. **关键词提取** - 从用户输入中提取主题内容
3. **模板应用** - 自动格式化为专业的提示词
4. **尺寸建议** - 每个模板都有推荐的默认尺寸

---

## 🎯 使用方法

### 方式 1: 在文生图中使用

```
用户: "公众号封面，关键词：可口可乐"

系统自动:
1. 检测到"公众号封面"模板
2. 提取关键词"可口可乐"
3. 应用模板,生成专业提示词
4. 使用模板默认尺寸 2K
5. 调用 Seedream API 生成图片
```

### 方式 2: 在组图生成中使用

```
用户: "生成4张图，小红书封面 美食探店"

系统自动:
1. 检测到"小红书封面"模板
2. 提取关键词"美食探店"
3. 应用模板
4. 生成4张小红书风格的封面图
```

### 方式 3: 查看可用模板

```
用户: "查看提示词模板"

系统调用: seedream_prompt_templates 工具
返回: 所有可用模板的列表和使用说明
```

---

## 📚 内置模板

### 1. 公众号封面 ⭐

**关键词:** `公众号封面`
**默认尺寸:** 2K
**画面比例:** 21:9 超宽屏构图
**风格:** 纸雕风格融合水彩层次美学

**使用示例:**
- "公众号封面，关键词：可口可乐"
- "公众号封面 AI教育"

**生成的提示词:**
```
根据内容主题自动匹配关键词和设计风格。

关键词符合纸雕风格融合水彩层次美学，字体结构立体精致如水彩纸雕工艺，
边缘细腻带水彩渐变与阴影效果，柔和红色与淡蓝水彩背景中营造纸艺空间，
点缀立体几何图形与水彩装饰元素，文字表面呈现高级纸张与水彩光泽质感，
字形排列层次分明如精美纸雕作品，整体营造出精致工艺与艺术学习的优雅层次，
温和而富有艺术感的教学氛围中透出水彩的精致美感，高级水彩工艺视觉

主题内容：可口可乐
画面比例：21:9 超宽屏构图，横向延展
```

### 2. 潮流派对 ⭐ (新增)

**关键词:** `潮流派对`
**默认尺寸:** 2K
**风格:** 活力字体设计、运营活动风格

**使用示例:**
- "潮流派对，关键词：可口可乐"
- "潮流派对 双十一狂欢"

**生成的提示词:**
```
中文"可口可乐"，潮流派对风格艺术字体，运营活动风格主题字体，
字体大小变化明显，错落有致排版。部分笔画延长，字体笔画粗厚醒目，
形态夸张变形，部分笔画带俏皮弧度或独特弯折，营造活波、肆意、
充满活力的派对氛围，黄绿色点缀。黑色背景，背景干净。白色字体，大师作品。
```

### 3. 小红书封面

**关键词:** `小红书封面`  
**默认尺寸:** 2K  
**风格:** 明亮清新、高饱和度色彩、年轻时尚

**使用示例:**
- "小红书封面 美食探店"
- "小红书封面，主题：穿搭分享"

### 4. 产品海报

**关键词:** `产品海报`
**默认尺寸:** 4K (高清)
**风格:** 专业商业、高端大气、视觉冲击力强

**使用示例:**
- "产品海报，主题：iPhone 15 Pro"
- "产品海报 运动鞋"

### 5. 国潮风格

**关键词:** `国潮风格`
**默认尺寸:** 2K
**风格:** 传统与现代融合、东方美学、潮流感

**使用示例:**
- "国潮风格 中国龙"
- "国潮风格，内容：茶文化"

### 6. 赛博朋克

**关键词:** `赛博朋克`
**默认尺寸:** 2K
**风格:** 霓虹灯光、暗黑未来、高科技感

**使用示例:**
- "赛博朋克 未来城市"
- "赛博朋克风格 机器人"

### 7. 极简主义

**关键词:** `极简主义`
**默认尺寸:** 2K
**风格:** 少即是多、克制优雅、留白艺术

**使用示例:**
- "极简主义 logo设计"
- "极简主义风格 建筑"

### 8. 水彩插画

**关键词:** `水彩插画`
**默认尺寸:** 2K
**风格:** 水彩晕染、柔和温润、手绘质感

**使用示例:**
- "水彩插画 小猫"
- "水彩插画风格 花卉"

---

## 🔧 技术实现

### 新增文件

1. **`seedream_mcp/prompt_templates.py`** - 模板系统核心模块
   - `detect_template()` - 检测模板
   - `extract_keyword()` - 提取关键词
   - `apply_template()` - 应用模板
   - `process_user_input()` - 处理用户输入
   - `get_available_templates()` - 获取模板列表

2. **`seedream_mcp/tools/prompt_template_tool.py`** - MCP 工具
   - 提供查看模板的 MCP 工具接口

### 修改文件

1. **`seedream_mcp/tools/text_to_image.py`**
   - 集成模板处理逻辑
   - 自动应用模板和默认尺寸

2. **`seedream_mcp/tools/sequential_generation.py`**
   - 集成模板处理逻辑
   - 支持组图生成使用模板

3. **`seedream_mcp/tools/__init__.py`**
   - 导出新工具

4. **`seedream_mcp/server.py`**
   - 注册新工具
   - 添加路由处理

---

## 📊 工作流程

```
用户输入: "公众号封面，关键词：可口可乐"
    ↓
检测模板: "公众号封面" ✅
    ↓
提取关键词: "可口可乐" ✅
    ↓
应用模板: 格式化为专业提示词 ✅
    ↓
设置默认尺寸: 2K ✅
    ↓
调用 Seedream API 生成图片 ✅
    ↓
上传七牛云 + 返回 Markdown ✅
```

---

## ✅ 测试结果

运行 `python test_prompt_templates.py`:

- ✅ 模板检测正常
- ✅ 关键词提取正常
- ✅ 模板应用正常
- ✅ 完整流程正常

---

## 🚀 下一步

**重启 MCP 服务后,你就可以使用了!**

**测试命令:**
```
"公众号封面，关键词：可口可乐"
```

**预期效果:**
1. 自动应用公众号封面模板
2. 使用 2K 尺寸
3. 生成纸雕水彩风格的封面图
4. 上传七牛云
5. 返回 Markdown 图片链接

---

## 💡 扩展建议

如果你想添加更多模板,只需要在 `seedream_mcp/prompt_templates.py` 的 `PROMPT_TEMPLATES` 字典中添加:

```python
"你的模板名称": {
    "template": "你的提示词模板，使用 {keyword} 作为占位符",
    "default_size": "2K",  # 或 "4K"
    "description": "模板描述"
}
```

就这么简单! 🎉

